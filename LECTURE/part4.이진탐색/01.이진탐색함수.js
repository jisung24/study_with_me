"use strict";
// ì´ì§„ íƒìƒ‰ìœ¼ë¡œ ì •ë ¬ëœ ë°°ì—´ì—ì„œ íŠ¹ì • ì›ì†Œì˜ ê°œìˆ˜ êµ¬í•˜ê¸°!
// ë­ arrì—ì„œ 3ì˜ ê°œìˆ˜ë¥¼ êµ¬í•˜ê¸°!
// => ê·¸ëƒ¥ mapì„ ì‚¬ìš©í•˜ë©´ ë  ê±° ê°™ì€ë°..!

// 1. ë©”ëª¨ë¦¬ ì¸¡ë©´
// ì´ì§„ íƒìƒ‰ : ë”± í•„ìš”í•œ ë§Œí¼ì˜ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•œë‹¤.
// í•´ì‹œ : í•´ì‹œ ì ì¤‘ë¥ ì„ ë†’ì´ê¸° ìœ„í•´ì„œ í•„ìš” ì´ìƒì˜ ë©”ëª¨ë¦¬ê°€ í• ë‹¹ì´ ëœë‹¤.

// ì¦‰, logì‹œê°„ ë³µì¡ë„ë¡œ, ì •ë ¬ëœ ë°°ì—´ì—ì„œ íŠ¹ì • ë²”ìœ„ì— í•´ë‹¹ë˜ëŠ” íŠ¹ì • ê°’ì˜ ê°œìˆ˜ë¥¼ êµ¬í•˜ëŠ”ê±°ì•¼!
// ex) index 1ë²ˆë¶€í„° 7ë²ˆê¹Œì§€ ì¤‘ 3ì˜ ê°œìˆ˜ë¥¼ êµ¬í•˜ì!
// â—ï¸ë‹¨ ì •ë ¬ì´ ë˜ì–´ ìˆì–´ì•¼ ë¼â—ï¸

// lowerBountë¡œ 5ê°€ ê°€ì¥ ì²˜ìŒ ë‚˜íƒ€ë‚˜ëŠ” Index
// upperBound 5ê°€ ê°€ì¥ ë‚˜ì¤‘ì— ë‚˜íƒ€ë‚˜ëŠ” index
// end => mid ì¦‰ ìµœëŒ€í•œ ì™¼ìª½ìœ¼ë¡œ!!!

/**
 * í•´ë‹¹ ê°’ì´ íŠ¹ì • ë²”ìœ„ì—ì„œ ë‚˜íƒ€ë‚˜ëŠ” ì²« ë²ˆì§¸ ìœ„ì¹˜ë¥¼ ë°˜í™˜
 * @param {*} arr : ì°¾ì„ ë°°ì—´
 * @param {*} target : ì°¾ì„ ê°’
 * @param {*} start : íƒìƒ‰ ì‹œì‘ index
 * @param {*} end : íƒìƒ‰ ë index
 * @returns : ì°¾ëŠ” ê°’ì´ ì²« ë²ˆì§¸ ë‚˜ì˜¤ëŠ” ìœ„ì¹˜ => indexOfì™€ ë¹„ìŠ·í•˜ë‹¤ê³  ìƒê°í•˜ë©´ ë¼!
 */
let lowerBound = (arr, target, start, end) => {
  while (start < end) {
    let mid = parseInt((start + end) / 2);
    if (arr[mid] >= target) end = mid;
    else start = mid + 1;
  }
  return end;
};

/**
 * íŠ¹ì • ë²”ìœ„ì—ì„œ íŠ¹ì • ê°’ì´ ê°€ì¥ ë§ˆì§€ë§‰ì— ë‚˜íƒ€ë‚˜ëŠ” ìœ„ì¹˜ => ì¤‘ìš”!
 * ì´ê±¸ í† ëŒ€ë¡œ lowerBoundë‘ í•©ì³ì ¸ì„œ ë¬¸ì œ í’€ ìˆ˜ ìˆìœ¼ë‹ˆê¹Œ ê¼­ ë‘˜ì´ êµ¬í˜„ì„ í•´ì•¼ ë¼!
 * @param {*} arr : ì°¾ì„ ë°°ì—´
 * @param {*} target : ì°¾ì„ ê°’
 * @param {*} start : íƒìƒ‰ ì‹œì‘
 * @param {*} end : íƒìƒ‰ ë
 * @returns : ğŸ”´ ì°¾ì„ ê°’ì˜ ë‹¤ìŒ index ğŸ”´
 */
let upperBound = (arr, target, start, end) => {
  // lowerBoundëŠ” ê·¸ëƒ¥ ë“±í˜¸ í•˜ë‚˜ë§Œ ë‹¤ë¦„
  while (start < end) {
    let mid = parseInt((start + end) / 2);
    if (arr[mid] > target) end = mid; // LowerBoundì—ì„œ ì´ ë¶€ë¶„ =ë§Œ ì—†ì• ì£¼ë©´ ë¼!
    else start = mid + 1;
  }
  return end;
};

let countByRange = (arr, leftValue, rightValue) => {
  // ë°°ì—´ì—ì„œ ê°’ì´ -1ì—ì„œ 3ì‚¬ì´ì— ìˆëŠ” ê°’ì˜ ê°œìˆ˜ë¥¼ ì¶œë ¥í•œë‹¤. => ì •ë ¬ ë¼ ìˆëŠ” ìƒíƒœ!
  // 3ì˜ ìœ„ì¹˜ë¥¼ ì°¾ëŠ”ë‹¤.
  let rightIndex = upperBound(arr, rightValue, 0, arr.length - 1);
  let leftIndex = lowerBound(arr, leftValue, 0, arr.length - 1);

  // ì¦‰, ì–´ì°¨í”¼ ìˆœì„œëŒ€ë¡œ ì •ë ¬ì´ ë¼ ìˆìœ¼ë‹ˆê¹Œ
  // ê°€ì¥ í° ê°’ : 3ì˜ indexë¥¼ upperBoundë¡œ ì°¾ê³ ,
  // ê°€ì¥ ì‘ì€ ê°’ì˜ ì™¼ìª½ ê°’ì„ lowerBoundë¡œ ì°¾ëŠ”ë‹¤
  // ê·¸ë˜ì„œ ë¹¼ì£¼ë©´ ê·¸ ì‚¬ì´ì— ìˆëŠ” ê°’ì˜ ê°œìˆ˜ê°€ ë‚˜ì˜¨ë‹¤.
  // â—ï¸ê³„ì† ë§ í•˜ì§€ë§Œ ë¬´ì¡°ê±´ ì •ë ¬ì´ ë˜ì–´ ìˆì–´ì•¼ ë¼â—ï¸
  return rightIndex - leftIndex;
};
let arr = [1, 2, 3, 3, 3, 3, 4, 5, 6];
console.log(lowerBound(arr, 3, 0, arr.length - 1)); // 3ì˜ ì²« ë²ˆì§¸ ìœ„ì¹˜ ë°˜í™˜!
console.log(upperBound(arr, 3, 0, arr.length - 1)); // 6ë²ˆ! => ì¦‰, ê°€ì¥ ë§ˆì§€ë§‰ 3ì˜ ë‹¤ìŒ ìœ„ì¹˜!
// ê·¸ë˜ì„œ 3ì˜ ê°œìˆ˜ëŠ” ê·¸ëƒ¥ ë¹¼ì£¼ë©´ ë¼!
console.log(countByRange(arr, -1, 3)); // 6ê°œ!

{
  // lastIndexOf - indexOfì™€ë„ ê°™ìŒ!
  // ê·¼ë° ì‹œê°„ë³µì¡ë„ê°€ ëœ ê±¸ë ¤..!
  let arr = [1, 2, 3, 4, 4, 4, 6, 6, 6, 7, 8, 9];
  // 3ì´ìƒ 8ì´í•˜ì¸ ìˆ«ìì˜ ê°œìˆ˜!
  let last = arr.lastIndexOf(8);
  let first = arr.indexOf(3);
  console.log(last - first + 1); // <= ì´ê¸° ë•Œë¬¸ì´ë‹¤. => upperBountëŠ” <ë¼ì„œ +1 ì•ˆ í•´ì¤˜ë„ ë¨!
}
